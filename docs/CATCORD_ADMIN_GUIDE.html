<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Catcord – Admin Guide</title>
<link href="catcord-docs-responsive.css" rel="stylesheet"/>
<style>
  :root { --bg:#0d1117; --panel:#161b22; --text:#c9d1d9; --muted:#8b949e; --accent:#58a6ff; --border:#30363d; }
  body { margin:0; background:var(--bg); color:var(--text); font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial; }
  .wrap { max-width:880px; margin:0 auto; padding:28px 20px; }
  h1 { font-size:1.9rem; margin:0 0 8px; }
  p.lead { color:var(--muted); margin:0 0 16px; }
  section { background:var(--panel); border:1px solid var(--border); border-radius:12px; padding:16px 18px; margin:14px 0; }
  h2 { font-size:1.2rem; margin:0 0 10px; }
  h3 { font-size:1.05rem; margin:0.8em 0 0.35em; }
  pre, code { background:#0b1220; color:#d1e7ff; border:1px solid #19223a; border-radius:6px; }
  code { padding:2px 6px; }
  pre { padding:10px 12px; overflow-x:auto; }
  ul { margin:0.4em 0 0.4em 1.2em; }
</style>
</head>
<body>
<div class="wrap">
<h1>Catcord – Admin Guide</h1>
<p class="lead">Operational reference for Discord server administrators.</p>

<section>
<h2>Configuration</h2>
<ul>
<li><strong>Tokens:</strong> <code>DISCORD_TOKEN</code> (required), <code>DEEPL_TOKEN</code> and/or <code>OPENAI_TOKEN</code> for translation, optional <code>DEEPL_API_URL</code>, <code>OPENAI_API_URL</code>, <code>OPENAI_MODEL</code>.</li>
<li><strong>Guild scope:</strong> set <code>GUILD_ID</code> in <code>.env</code> to restrict the bot to a single server during testing.</li>
<li><strong>Webhook label:</strong> override <code>LANGRELAY_WEBHOOK_NAME</code> to customise the relay webhook name.</li>
<li><strong>Persistence:</strong> per-guild LangRelay data lives in <code>./data/langrelay/&lt;guild_id&gt;.json</code>; reminders live in <code>./data/reminder/&lt;guild_id&gt;.json</code>.</li>
<li>Slash commands sync automatically on launch; run the <code>reload</code>/<code>load</code>/<code>unload</code> owner commands to hot-reload cogs.</li>
</ul>
</section>

<section>
<h2>Language Relay</h2>
<p>Mirror language channels with webhooks, optional translation (DeepL or OpenAI), reply context, thread mirroring, and mirrored reactions.</p>
<h3>Group lifecycle</h3>
<pre>/langrelay_group_create EU
/langrelay_group_add EU #german DE
/langrelay_group_add EU #english EN-US
/langrelay_group_add EU #french FR
/langrelay_group_list
/langrelay_group_power group:EU state:off
/langrelay_group_power group:EU state:on
/langrelay_group_remove group:EU channel:#french
/langrelay_group_delete group:EU</pre>
<p><em>Notes:</em> groups are bidirectional; channel names are stored as keys. Removing the final channel deletes the group automatically.</p>
<h3>Provider &amp; options</h3>
<ul>
<li><code>/langrelay_provider provider:&lt;deepl|openai&gt;</code> – validates keys before switching.</li>
<li><code>/langrelay_power state:&lt;on|off&gt;</code> – global enable/disable.</li>
<li><code>/langrelay_replymode state:&lt;on|off&gt;</code> – adds reply context text above mirrored messages.</li>
<li><code>/langrelay_thread_mirroring state:&lt;on|off&gt;</code> – mirrors threads with matching names.</li>
<li><code>/langrelay_reaction_mirroring state:&lt;on|off&gt;</code> – copies emoji reactions across mirrored posts.</li>
</ul>
<h3>Status &amp; maintenance</h3>
<ul>
<li><code>/langrelay_status</code> – shows provider, feature toggles, and every group with their current state (<code>on/off</code>).</li>
<li><code>/langrelay_group_add</code> and <code>..._remove</code> offer autocomplete for groups and language codes; DeepL targets are fetched hourly when a token is available.</li>
<li>Webhook permissions required: <strong>Send Messages</strong>, <strong>Manage Webhooks</strong>, <strong>Read Message History</strong>, plus <strong>Create Public Threads</strong> when thread mirroring is enabled.</li>
</ul>
</section>

<section>
<h2>Auto-Translate</h2>
<p>Enable per-channel automatic translations without creating relay mappings.</p>
<pre>/autotranslate_on target:EN-US source:DE formality:more min_chars:8
/autotranslate_status
/autotranslate_off</pre>
<ul>
<li>Supported targets follow DeepL’s codes (with autocomplete). Sources are optional; leave blank for auto-detect.</li>
<li><code>formality</code> accepts <code>default</code>, <code>less</code>, or <code>more</code> when supported by the target language.</li>
<li><code>min_chars</code> prevents short confirmations from triggering translations (default 5 characters).</li>
<li>Replies are posted to the original message; fallback channel messages are used if replying fails due to permissions.</li>
</ul>
</section>

<section>
<h2>Reminders</h2>
<p>Schedule repeating or one-time reminders with persistent storage and optional LangRelay mirroring.</p>
<h3>Create</h3>
<pre>/reminder add name:backup channel:#ops message:"Run backup" time:02:00
/reminder add name:reports channel:#ops message:"Weekly metrics" times:"Mon@09:00, Thu@09:00" group:Ops
/reminder add name:launch channel:#ops message:"Launch prep" interval:1 unit:days once:true</pre>
<h3>Maintain</h3>
<pre>/reminder edit name:reports add_times:"Sat@09:00" headline:"Weekly Reports"
/reminder edit name:backup clear_interval:true
/reminder remove name:launch
/reminder list
/reminder toggle enabled:false</pre>
<h3>Group tools</h3>
<pre>/reminder group rename name:Ops new_name:Operations
/reminder group remove name:Operations delete_reminders:true</pre>
<ul>
<li>Schedules accept either an interval (<code>interval</code> + <code>unit</code>) or explicit times via <code>time</code> / <code>times</code>; mixing both is prevented.</li>
<li>Use <code>group</code> labels to organise reminders; grouped entries appear together in <code>/reminder list</code> and can be bulk-renamed/removed.</li>
<li>Reminders pause globally with <code>/reminder toggle enabled:false</code>; stored entries remain intact.</li>
<li>When a reminder fires in a mapped LangRelay channel, translations are attempted for each linked channel automatically.</li>
</ul>
</section>

<section>
<h2>Utilities &amp; Diagnostics</h2>
<ul>
<li><code>/translate</code>, <code>/detect</code>, <code>/languages</code> – DeepL helpers with autocomplete.</li>
<li><code>/tping</code> (translation cog health), <code>/ping</code> (latency), <code>/about</code> (bot metadata), <code>/hello</code> (connectivity test).</li>
<li>Owner-only text commands: <code>!reload cogs.langrelay</code>, <code>!load ...</code>, <code>!unload ...</code>.</li>
</ul>
</section>

</div>
</body>
</html>
